{"version":3,"sources":["../node_modules/broadcast-channel/node_modules/@babel/runtime/helpers/asyncToGenerator.js","../node_modules/broadcast-channel/node_modules/@babel/runtime/helpers/typeof.js","../node_modules/broadcast-channel/node_modules/@babel/runtime/helpers/regeneratorRuntime.js","../node_modules/broadcast-channel/node_modules/@babel/runtime/regenerator/index.js","../node_modules/eventemitter3/index.js","../node_modules/p-finally/index.js","../node_modules/p-timeout/index.js","../node_modules/p-queue/dist/lower-bound.js","../node_modules/p-queue/dist/priority-queue.js","../node_modules/p-queue/dist/index.js","../src/index.ts","../node_modules/broadcast-channel/dist/esnode/util.js","../node_modules/broadcast-channel/dist/esnode/methods/native.js","../node_modules/oblivious-set/src/index.ts","../node_modules/broadcast-channel/dist/esnode/options.js","../node_modules/broadcast-channel/dist/esnode/methods/indexed-db.js","../node_modules/broadcast-channel/dist/esnode/methods/localstorage.js","../node_modules/broadcast-channel/dist/esnode/methods/simulate.js","../node_modules/broadcast-channel/dist/esnode/methods/node.js","../node_modules/unload/dist/es/browser.js","../node_modules/unload/dist/es/node.js","../node_modules/unload/dist/es/index.js","../node_modules/broadcast-channel/dist/esnode/method-chooser.js","../node_modules/broadcast-channel/dist/esnode/broadcast-channel.js","../src/utils.ts","../src/vanilla.ts"],"sourcesContent":["function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nmodule.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\nmodule.exports = (promise, onFinally) => {\n\tonFinally = onFinally || (() => {});\n\n\treturn promise.then(\n\t\tval => new Promise(resolve => {\n\t\t\tresolve(onFinally());\n\t\t}).then(() => val),\n\t\terr => new Promise(resolve => {\n\t\t\tresolve(onFinally());\n\t\t}).then(() => {\n\t\t\tthrow err;\n\t\t})\n\t);\n};\n","'use strict';\n\nconst pFinally = require('p-finally');\n\nclass TimeoutError extends Error {\n\tconstructor(message) {\n\t\tsuper(message);\n\t\tthis.name = 'TimeoutError';\n\t}\n}\n\nconst pTimeout = (promise, milliseconds, fallback) => new Promise((resolve, reject) => {\n\tif (typeof milliseconds !== 'number' || milliseconds < 0) {\n\t\tthrow new TypeError('Expected `milliseconds` to be a positive number');\n\t}\n\n\tif (milliseconds === Infinity) {\n\t\tresolve(promise);\n\t\treturn;\n\t}\n\n\tconst timer = setTimeout(() => {\n\t\tif (typeof fallback === 'function') {\n\t\t\ttry {\n\t\t\t\tresolve(fallback());\n\t\t\t} catch (error) {\n\t\t\t\treject(error);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = typeof fallback === 'string' ? fallback : `Promise timed out after ${milliseconds} milliseconds`;\n\t\tconst timeoutError = fallback instanceof Error ? fallback : new TimeoutError(message);\n\n\t\tif (typeof promise.cancel === 'function') {\n\t\t\tpromise.cancel();\n\t\t}\n\n\t\treject(timeoutError);\n\t}, milliseconds);\n\n\t// TODO: Use native `finally` keyword when targeting Node.js 10\n\tpFinally(\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\tpromise.then(resolve, reject),\n\t\t() => {\n\t\t\tclearTimeout(timer);\n\t\t}\n\t);\n});\n\nmodule.exports = pTimeout;\n// TODO: Remove this for the next major release\nmodule.exports.default = pTimeout;\n\nmodule.exports.TimeoutError = TimeoutError;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Port of lower_bound from https://en.cppreference.com/w/cpp/algorithm/lower_bound\n// Used to compute insertion index to keep queue sorted after insertion\nfunction lowerBound(array, value, comparator) {\n    let first = 0;\n    let count = array.length;\n    while (count > 0) {\n        const step = (count / 2) | 0;\n        let it = first + step;\n        if (comparator(array[it], value) <= 0) {\n            first = ++it;\n            count -= step + 1;\n        }\n        else {\n            count = step;\n        }\n    }\n    return first;\n}\nexports.default = lowerBound;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst lower_bound_1 = require(\"./lower-bound\");\nclass PriorityQueue {\n    constructor() {\n        this._queue = [];\n    }\n    enqueue(run, options) {\n        options = Object.assign({ priority: 0 }, options);\n        const element = {\n            priority: options.priority,\n            run\n        };\n        if (this.size && this._queue[this.size - 1].priority >= options.priority) {\n            this._queue.push(element);\n            return;\n        }\n        const index = lower_bound_1.default(this._queue, element, (a, b) => b.priority - a.priority);\n        this._queue.splice(index, 0, element);\n    }\n    dequeue() {\n        const item = this._queue.shift();\n        return item === null || item === void 0 ? void 0 : item.run;\n    }\n    filter(options) {\n        return this._queue.filter((element) => element.priority === options.priority).map((element) => element.run);\n    }\n    get size() {\n        return this._queue.length;\n    }\n}\nexports.default = PriorityQueue;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EventEmitter = require(\"eventemitter3\");\nconst p_timeout_1 = require(\"p-timeout\");\nconst priority_queue_1 = require(\"./priority-queue\");\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst empty = () => { };\nconst timeoutError = new p_timeout_1.TimeoutError();\n/**\nPromise queue with concurrency control.\n*/\nclass PQueue extends EventEmitter {\n    constructor(options) {\n        var _a, _b, _c, _d;\n        super();\n        this._intervalCount = 0;\n        this._intervalEnd = 0;\n        this._pendingCount = 0;\n        this._resolveEmpty = empty;\n        this._resolveIdle = empty;\n        // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n        options = Object.assign({ carryoverConcurrencyCount: false, intervalCap: Infinity, interval: 0, concurrency: Infinity, autoStart: true, queueClass: priority_queue_1.default }, options);\n        if (!(typeof options.intervalCap === 'number' && options.intervalCap >= 1)) {\n            throw new TypeError(`Expected \\`intervalCap\\` to be a number from 1 and up, got \\`${(_b = (_a = options.intervalCap) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : ''}\\` (${typeof options.intervalCap})`);\n        }\n        if (options.interval === undefined || !(Number.isFinite(options.interval) && options.interval >= 0)) {\n            throw new TypeError(`Expected \\`interval\\` to be a finite number >= 0, got \\`${(_d = (_c = options.interval) === null || _c === void 0 ? void 0 : _c.toString()) !== null && _d !== void 0 ? _d : ''}\\` (${typeof options.interval})`);\n        }\n        this._carryoverConcurrencyCount = options.carryoverConcurrencyCount;\n        this._isIntervalIgnored = options.intervalCap === Infinity || options.interval === 0;\n        this._intervalCap = options.intervalCap;\n        this._interval = options.interval;\n        this._queue = new options.queueClass();\n        this._queueClass = options.queueClass;\n        this.concurrency = options.concurrency;\n        this._timeout = options.timeout;\n        this._throwOnTimeout = options.throwOnTimeout === true;\n        this._isPaused = options.autoStart === false;\n    }\n    get _doesIntervalAllowAnother() {\n        return this._isIntervalIgnored || this._intervalCount < this._intervalCap;\n    }\n    get _doesConcurrentAllowAnother() {\n        return this._pendingCount < this._concurrency;\n    }\n    _next() {\n        this._pendingCount--;\n        this._tryToStartAnother();\n        this.emit('next');\n    }\n    _resolvePromises() {\n        this._resolveEmpty();\n        this._resolveEmpty = empty;\n        if (this._pendingCount === 0) {\n            this._resolveIdle();\n            this._resolveIdle = empty;\n            this.emit('idle');\n        }\n    }\n    _onResumeInterval() {\n        this._onInterval();\n        this._initializeIntervalIfNeeded();\n        this._timeoutId = undefined;\n    }\n    _isIntervalPaused() {\n        const now = Date.now();\n        if (this._intervalId === undefined) {\n            const delay = this._intervalEnd - now;\n            if (delay < 0) {\n                // Act as the interval was done\n                // We don't need to resume it here because it will be resumed on line 160\n                this._intervalCount = (this._carryoverConcurrencyCount) ? this._pendingCount : 0;\n            }\n            else {\n                // Act as the interval is pending\n                if (this._timeoutId === undefined) {\n                    this._timeoutId = setTimeout(() => {\n                        this._onResumeInterval();\n                    }, delay);\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    _tryToStartAnother() {\n        if (this._queue.size === 0) {\n            // We can clear the interval (\"pause\")\n            // Because we can redo it later (\"resume\")\n            if (this._intervalId) {\n                clearInterval(this._intervalId);\n            }\n            this._intervalId = undefined;\n            this._resolvePromises();\n            return false;\n        }\n        if (!this._isPaused) {\n            const canInitializeInterval = !this._isIntervalPaused();\n            if (this._doesIntervalAllowAnother && this._doesConcurrentAllowAnother) {\n                const job = this._queue.dequeue();\n                if (!job) {\n                    return false;\n                }\n                this.emit('active');\n                job();\n                if (canInitializeInterval) {\n                    this._initializeIntervalIfNeeded();\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    _initializeIntervalIfNeeded() {\n        if (this._isIntervalIgnored || this._intervalId !== undefined) {\n            return;\n        }\n        this._intervalId = setInterval(() => {\n            this._onInterval();\n        }, this._interval);\n        this._intervalEnd = Date.now() + this._interval;\n    }\n    _onInterval() {\n        if (this._intervalCount === 0 && this._pendingCount === 0 && this._intervalId) {\n            clearInterval(this._intervalId);\n            this._intervalId = undefined;\n        }\n        this._intervalCount = this._carryoverConcurrencyCount ? this._pendingCount : 0;\n        this._processQueue();\n    }\n    /**\n    Executes all queued functions until it reaches the limit.\n    */\n    _processQueue() {\n        // eslint-disable-next-line no-empty\n        while (this._tryToStartAnother()) { }\n    }\n    get concurrency() {\n        return this._concurrency;\n    }\n    set concurrency(newConcurrency) {\n        if (!(typeof newConcurrency === 'number' && newConcurrency >= 1)) {\n            throw new TypeError(`Expected \\`concurrency\\` to be a number from 1 and up, got \\`${newConcurrency}\\` (${typeof newConcurrency})`);\n        }\n        this._concurrency = newConcurrency;\n        this._processQueue();\n    }\n    /**\n    Adds a sync or async task to the queue. Always returns a promise.\n    */\n    async add(fn, options = {}) {\n        return new Promise((resolve, reject) => {\n            const run = async () => {\n                this._pendingCount++;\n                this._intervalCount++;\n                try {\n                    const operation = (this._timeout === undefined && options.timeout === undefined) ? fn() : p_timeout_1.default(Promise.resolve(fn()), (options.timeout === undefined ? this._timeout : options.timeout), () => {\n                        if (options.throwOnTimeout === undefined ? this._throwOnTimeout : options.throwOnTimeout) {\n                            reject(timeoutError);\n                        }\n                        return undefined;\n                    });\n                    resolve(await operation);\n                }\n                catch (error) {\n                    reject(error);\n                }\n                this._next();\n            };\n            this._queue.enqueue(run, options);\n            this._tryToStartAnother();\n            this.emit('add');\n        });\n    }\n    /**\n    Same as `.add()`, but accepts an array of sync or async functions.\n\n    @returns A promise that resolves when all functions are resolved.\n    */\n    async addAll(functions, options) {\n        return Promise.all(functions.map(async (function_) => this.add(function_, options)));\n    }\n    /**\n    Start (or resume) executing enqueued tasks within concurrency limit. No need to call this if queue is not paused (via `options.autoStart = false` or by `.pause()` method.)\n    */\n    start() {\n        if (!this._isPaused) {\n            return this;\n        }\n        this._isPaused = false;\n        this._processQueue();\n        return this;\n    }\n    /**\n    Put queue execution on hold.\n    */\n    pause() {\n        this._isPaused = true;\n    }\n    /**\n    Clear the queue.\n    */\n    clear() {\n        this._queue = new this._queueClass();\n    }\n    /**\n    Can be called multiple times. Useful if you for example add additional items at a later time.\n\n    @returns A promise that settles when the queue becomes empty.\n    */\n    async onEmpty() {\n        // Instantly resolve if the queue is empty\n        if (this._queue.size === 0) {\n            return;\n        }\n        return new Promise(resolve => {\n            const existingResolve = this._resolveEmpty;\n            this._resolveEmpty = () => {\n                existingResolve();\n                resolve();\n            };\n        });\n    }\n    /**\n    The difference with `.onEmpty` is that `.onIdle` guarantees that all work from the queue has finished. `.onEmpty` merely signals that the queue is empty, but it could mean that some promises haven't completed yet.\n\n    @returns A promise that settles when the queue becomes empty, and all promises have completed; `queue.size === 0 && queue.pending === 0`.\n    */\n    async onIdle() {\n        // Instantly resolve if none pending and if nothing else is queued\n        if (this._pendingCount === 0 && this._queue.size === 0) {\n            return;\n        }\n        return new Promise(resolve => {\n            const existingResolve = this._resolveIdle;\n            this._resolveIdle = () => {\n                existingResolve();\n                resolve();\n            };\n        });\n    }\n    /**\n    Size of the queue.\n    */\n    get size() {\n        return this._queue.size;\n    }\n    /**\n    Size of the queue, filtered by the given options.\n\n    For example, this can be used to find the number of items remaining in the queue with a specific priority level.\n    */\n    sizeBy(options) {\n        // eslint-disable-next-line unicorn/no-fn-reference-in-iterator\n        return this._queue.filter(options).length;\n    }\n    /**\n    Number of pending promises.\n    */\n    get pending() {\n        return this._pendingCount;\n    }\n    /**\n    Whether the queue is currently paused.\n    */\n    get isPaused() {\n        return this._isPaused;\n    }\n    get timeout() {\n        return this._timeout;\n    }\n    /**\n    Set the timeout for future operations.\n    */\n    set timeout(milliseconds) {\n        this._timeout = milliseconds;\n    }\n}\nexports.default = PQueue;\n","import type { PiniaPluginContext } from 'pinia'\nimport type { Options } from './vanilla'\nimport { BroadcastChannel as BroadcastChannelImpl } from 'broadcast-channel'\nimport { serialize } from './utils'\n\nfunction stateHasKey(key: string, $state: PiniaPluginContext['store']['$state']) {\n  return Object.keys($state).includes(key)\n}\n\n/**\n * Adds a `share` option to your store to share state across browser tabs.\n *\n * @example\n *\n * ```ts\n * import { PiniaSharedState } from 'pinia-shared-state'\n *\n * // Pass the plugin to your application's pinia plugin\n * pinia.use(PiniaSharedState({ enable: true, initialize: false, type: 'localstorage' }))\n * ```\n *\n * @param options - Global plugin options.\n * @param options.enable - Enable/disable sharing of state for all stores.\n * @param options.initialize - Immediately recover the shared state from another tab.\n * @param options.type - 'native', 'idb', 'localstorage', 'node'.\n * @param options.serializer - Custom serializer to serialize store state before broadcasting.\n */\nexport function PiniaSharedState({\n  enable = true,\n  initialize = true,\n  type,\n  serializer,\n}: Options & { enable?: boolean }) {\n  return ({ store, options }: PiniaPluginContext) => {\n    const isEnabled = options?.share?.enable ?? enable\n    const omittedKeys = options?.share?.omit ?? []\n    if (!isEnabled)\n      return\n\n    const channel = new BroadcastChannelImpl(store.$id, {\n      type,\n    })\n\n    let timestamp = 0\n    let externalUpdate = false\n\n    const keysToUpdate = Object.keys(store.$state).filter(key => !omittedKeys.includes(key) && stateHasKey(key, store.$state))\n\n    channel.onmessage = (newState) => {\n      if (newState === undefined) {\n        channel.postMessage({\n          timestamp,\n          state: serialize(store.$state, serializer),\n        })\n        return\n      }\n\n      if (newState.timestamp <= timestamp)\n        return\n\n      externalUpdate = true\n      timestamp = newState.timestamp\n\n      const deserializedState = serializer?.deserialize(newState.serializedState);\n\n      store.$patch((state) => {\n        keysToUpdate.forEach((key) => {\n          state[key] = deserializedState[key]\n        })\n      })\n    }\n\n    const shouldInitialize = options?.share?.initialize ?? initialize\n    if (shouldInitialize)\n      channel.postMessage(undefined)\n\n    store.$subscribe((_, state) => {\n      if (!externalUpdate) {\n        timestamp = Date.now()\n        channel.postMessage({\n          timestamp,\n          state: serialize(state, serializer),\n        })\n      }\n      externalUpdate = false\n    })\n  }\n}\n\nexport { share } from './vanilla'\n\ndeclare module 'pinia' {\n  // eslint-disable-next-line unused-imports/no-unused-vars\n  export interface DefineStoreOptionsBase<S, Store> {\n    /**\n     * Override global config.\n     *\n     * @example\n     *\n     * ```js\n     * defineStore({\n     *   id: 'counter',\n     *   state: () => ({ count: 0, name: 'John Doe' })\n     *   share: {\n     *     // An array of fields that the plugin will ignore.\n     *     omit: ['name'],\n     *     // Enable/disable sharing of state for this store.\n     *     enable: false\n     *     // If set to true this tab tries to immediately recover the\n     *     // shared state from another tab. Defaults to true.\n     *     initialize: false\n     *     // Serialize store state before broadcasting. Defaults to `JSON.stringify`/`JSON.parse`.\n     *     serializer: {\n     *      serialize: JSON.stringify\n     *      deserialize: JSON.parse\n     *     }\n     *   }\n     * })\n     * ```\n     */\n    share?: {\n      omit?: Array<keyof S>\n      enable?: boolean\n      initialize?: boolean\n    }\n  }\n}\n","/**\n * returns true if the given object is a promise\n */\nexport function isPromise(obj) {\n  return obj && typeof obj.then === 'function';\n}\nexport var PROMISE_RESOLVED_FALSE = Promise.resolve(false);\nexport var PROMISE_RESOLVED_TRUE = Promise.resolve(true);\nexport var PROMISE_RESOLVED_VOID = Promise.resolve();\nexport function sleep(time, resolveWith) {\n  if (!time) time = 0;\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      return res(resolveWith);\n    }, time);\n  });\n}\nexport function randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\n/**\n * https://stackoverflow.com/a/8084248\n */\nexport function randomToken() {\n  return Math.random().toString(36).substring(2);\n}\nvar lastMs = 0;\n\n/**\n * Returns the current unix time in micro-seconds,\n * WARNING: This is a pseudo-function\n * Performance.now is not reliable in webworkers, so we just make sure to never return the same time.\n * This is enough in browsers, and this function will not be used in nodejs.\n * The main reason for this hack is to ensure that BroadcastChannel behaves equal to production when it is used in fast-running unit tests.\n */\nexport function microSeconds() {\n  var ret = Date.now() * 1000; // milliseconds to microseconds\n  if (ret <= lastMs) {\n    ret = lastMs + 1;\n  }\n  lastMs = ret;\n  return ret;\n}\n\n/**\n * Check if WebLock API is supported.\n * @link https://developer.mozilla.org/en-US/docs/Web/API/Web_Locks_API\n */\nexport function supportsWebLockAPI() {\n  if (typeof navigator !== 'undefined' && typeof navigator.locks !== 'undefined' && typeof navigator.locks.request === 'function') {\n    return true;\n  } else {\n    return false;\n  }\n}","import { microSeconds as micro, PROMISE_RESOLVED_VOID } from '../util.js';\nexport var microSeconds = micro;\nexport var type = 'native';\nexport function create(channelName) {\n  var state = {\n    time: micro(),\n    messagesCallback: null,\n    bc: new BroadcastChannel(channelName),\n    subFns: [] // subscriberFunctions\n  };\n  state.bc.onmessage = function (msgEvent) {\n    if (state.messagesCallback) {\n      state.messagesCallback(msgEvent.data);\n    }\n  };\n  return state;\n}\nexport function close(channelState) {\n  channelState.bc.close();\n  channelState.subFns = [];\n}\nexport function postMessage(channelState, messageJson) {\n  try {\n    channelState.bc.postMessage(messageJson, false);\n    return PROMISE_RESOLVED_VOID;\n  } catch (err) {\n    return Promise.reject(err);\n  }\n}\nexport function onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\nexport function canBeUsed() {\n  // Deno runtime\n  // eslint-disable-next-line\n  if (typeof globalThis !== 'undefined' && globalThis.Deno && globalThis.Deno.args) {\n    return true;\n  }\n\n  // Browser runtime\n  if ((typeof window !== 'undefined' || typeof self !== 'undefined') && typeof BroadcastChannel === 'function') {\n    if (BroadcastChannel._pubkey) {\n      throw new Error('BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill');\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\nexport function averageResponseTime() {\n  return 150;\n}\nexport var NativeMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","\n/**\n * this is a set which automatically forgets\n * a given entry when a new entry is set and the ttl\n * of the old one is over\n */\nexport class ObliviousSet<T = any> {\n    public readonly map = new Map();\n\n    /**\n     * Creating calls to setTimeout() is expensive,\n     * so we only do that if there is not timeout already open.\n     */\n    public _to: boolean = false;\n    constructor(\n        public readonly ttl: number\n    ) { }\n\n    has(value: T): boolean {\n        return this.map.has(value);\n    }\n\n    add(value: T): void {\n        this.map.set(value, now());\n\n        /**\n         * When a new value is added,\n         * start the cleanup at the next tick\n         * to not block the cpu for more important stuff\n         * that might happen.\n         */\n        if (!this._to) {\n            this._to = true;\n            setTimeout(() => {\n                this._to = false;\n                removeTooOldValues(this);\n            }, 0);\n        }\n    }\n\n    clear() {\n        this.map.clear();\n    }\n}\n\n\n/**\n * Removes all entries from the set\n * where the TTL has expired\n */\nexport function removeTooOldValues(\n    obliviousSet: ObliviousSet\n) {\n    const olderThen = now() - obliviousSet.ttl;\n    const iterator = obliviousSet.map[Symbol.iterator]();\n\n    /**\n     * Because we can assume the new values are added at the bottom,\n     * we start from the top and stop as soon as we reach a non-too-old value.\n     */\n    while (true) {\n\n        const next = iterator.next().value;\n\n        if (!next) {\n            return; // no more elements\n        }\n        const value = next[0];\n        const time = next[1];\n        if (time < olderThen) {\n            obliviousSet.map.delete(value);\n        } else {\n            // We reached a value that is not old enough\n            return;\n        }\n    }\n}\n\nexport function now(): number {\n    return Date.now();\n}\n\n\n","export function fillOptionsWithDefaults() {\n  var originalOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var options = JSON.parse(JSON.stringify(originalOptions));\n\n  // main\n  if (typeof options.webWorkerSupport === 'undefined') options.webWorkerSupport = true;\n\n  // indexed-db\n  if (!options.idb) options.idb = {};\n  //  after this time the messages get deleted\n  if (!options.idb.ttl) options.idb.ttl = 1000 * 45;\n  if (!options.idb.fallbackInterval) options.idb.fallbackInterval = 150;\n  //  handles abrupt db onclose events.\n  if (originalOptions.idb && typeof originalOptions.idb.onclose === 'function') options.idb.onclose = originalOptions.idb.onclose;\n\n  // localstorage\n  if (!options.localstorage) options.localstorage = {};\n  if (!options.localstorage.removeTimeout) options.localstorage.removeTimeout = 1000 * 60;\n\n  // custom methods\n  if (originalOptions.methods) options.methods = originalOptions.methods;\n\n  // node\n  if (!options.node) options.node = {};\n  if (!options.node.ttl) options.node.ttl = 1000 * 60 * 2; // 2 minutes;\n  /**\n   * On linux use 'ulimit -Hn' to get the limit of open files.\n   * On ubuntu this was 4096 for me, so we use half of that as maxParallelWrites default.\n   */\n  if (!options.node.maxParallelWrites) options.node.maxParallelWrites = 2048;\n  if (typeof options.node.useFastPath === 'undefined') options.node.useFastPath = true;\n  return options;\n}","/**\n * this method uses indexeddb to store the messages\n * There is currently no observerAPI for idb\n * @link https://github.com/w3c/IndexedDB/issues/51\n * \n * When working on this, ensure to use these performance optimizations:\n * @link https://rxdb.info/slow-indexeddb.html\n */\n\nimport { sleep, randomInt, randomToken, microSeconds as micro, PROMISE_RESOLVED_VOID } from '../util.js';\nexport var microSeconds = micro;\nimport { ObliviousSet } from 'oblivious-set';\nimport { fillOptionsWithDefaults } from '../options.js';\nvar DB_PREFIX = 'pubkey.broadcast-channel-0-';\nvar OBJECT_STORE_ID = 'messages';\n\n/**\n * Use relaxed durability for faster performance on all transactions.\n * @link https://nolanlawson.com/2021/08/22/speeding-up-indexeddb-reads-and-writes/\n */\nexport var TRANSACTION_SETTINGS = {\n  durability: 'relaxed'\n};\nexport var type = 'idb';\nexport function getIdb() {\n  if (typeof indexedDB !== 'undefined') return indexedDB;\n  if (typeof window !== 'undefined') {\n    if (typeof window.mozIndexedDB !== 'undefined') return window.mozIndexedDB;\n    if (typeof window.webkitIndexedDB !== 'undefined') return window.webkitIndexedDB;\n    if (typeof window.msIndexedDB !== 'undefined') return window.msIndexedDB;\n  }\n  return false;\n}\n\n/**\n * If possible, we should explicitly commit IndexedDB transactions\n * for better performance.\n * @link https://nolanlawson.com/2021/08/22/speeding-up-indexeddb-reads-and-writes/\n */\nexport function commitIndexedDBTransaction(tx) {\n  if (tx.commit) {\n    tx.commit();\n  }\n}\nexport function createDatabase(channelName) {\n  var IndexedDB = getIdb();\n\n  // create table\n  var dbName = DB_PREFIX + channelName;\n\n  /**\n   * All IndexedDB databases are opened without version\n   * because it is a bit faster, especially on firefox\n   * @link http://nparashuram.com/IndexedDB/perf/#Open%20Database%20with%20version\n   */\n  var openRequest = IndexedDB.open(dbName);\n  openRequest.onupgradeneeded = function (ev) {\n    var db = ev.target.result;\n    db.createObjectStore(OBJECT_STORE_ID, {\n      keyPath: 'id',\n      autoIncrement: true\n    });\n  };\n  return new Promise(function (res, rej) {\n    openRequest.onerror = function (ev) {\n      return rej(ev);\n    };\n    openRequest.onsuccess = function () {\n      res(openRequest.result);\n    };\n  });\n}\n\n/**\n * writes the new message to the database\n * so other readers can find it\n */\nexport function writeMessage(db, readerUuid, messageJson) {\n  var time = Date.now();\n  var writeObject = {\n    uuid: readerUuid,\n    time: time,\n    data: messageJson\n  };\n  var tx = db.transaction([OBJECT_STORE_ID], 'readwrite', TRANSACTION_SETTINGS);\n  return new Promise(function (res, rej) {\n    tx.oncomplete = function () {\n      return res();\n    };\n    tx.onerror = function (ev) {\n      return rej(ev);\n    };\n    var objectStore = tx.objectStore(OBJECT_STORE_ID);\n    objectStore.add(writeObject);\n    commitIndexedDBTransaction(tx);\n  });\n}\nexport function getAllMessages(db) {\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  return new Promise(function (res) {\n    objectStore.openCursor().onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        ret.push(cursor.value);\n        //alert(\"Name for SSN \" + cursor.key + \" is \" + cursor.value.name);\n        cursor[\"continue\"]();\n      } else {\n        commitIndexedDBTransaction(tx);\n        res(ret);\n      }\n    };\n  });\n}\nexport function getMessagesHigherThan(db, lastCursorId) {\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  var keyRangeValue = IDBKeyRange.bound(lastCursorId + 1, Infinity);\n\n  /**\n   * Optimization shortcut,\n   * if getAll() can be used, do not use a cursor.\n   * @link https://rxdb.info/slow-indexeddb.html\n   */\n  if (objectStore.getAll) {\n    var getAllRequest = objectStore.getAll(keyRangeValue);\n    return new Promise(function (res, rej) {\n      getAllRequest.onerror = function (err) {\n        return rej(err);\n      };\n      getAllRequest.onsuccess = function (e) {\n        res(e.target.result);\n      };\n    });\n  }\n  function openCursor() {\n    // Occasionally Safari will fail on IDBKeyRange.bound, this\n    // catches that error, having it open the cursor to the first\n    // item. When it gets data it will advance to the desired key.\n    try {\n      keyRangeValue = IDBKeyRange.bound(lastCursorId + 1, Infinity);\n      return objectStore.openCursor(keyRangeValue);\n    } catch (e) {\n      return objectStore.openCursor();\n    }\n  }\n  return new Promise(function (res, rej) {\n    var openCursorRequest = openCursor();\n    openCursorRequest.onerror = function (err) {\n      return rej(err);\n    };\n    openCursorRequest.onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        if (cursor.value.id < lastCursorId + 1) {\n          cursor[\"continue\"](lastCursorId + 1);\n        } else {\n          ret.push(cursor.value);\n          cursor[\"continue\"]();\n        }\n      } else {\n        commitIndexedDBTransaction(tx);\n        res(ret);\n      }\n    };\n  });\n}\nexport function removeMessagesById(channelState, ids) {\n  if (channelState.closed) {\n    return Promise.resolve([]);\n  }\n  var tx = channelState.db.transaction(OBJECT_STORE_ID, 'readwrite', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  return Promise.all(ids.map(function (id) {\n    var deleteRequest = objectStore[\"delete\"](id);\n    return new Promise(function (res) {\n      deleteRequest.onsuccess = function () {\n        return res();\n      };\n    });\n  }));\n}\nexport function getOldMessages(db, ttl) {\n  var olderThen = Date.now() - ttl;\n  var tx = db.transaction(OBJECT_STORE_ID, 'readonly', TRANSACTION_SETTINGS);\n  var objectStore = tx.objectStore(OBJECT_STORE_ID);\n  var ret = [];\n  return new Promise(function (res) {\n    objectStore.openCursor().onsuccess = function (ev) {\n      var cursor = ev.target.result;\n      if (cursor) {\n        var msgObk = cursor.value;\n        if (msgObk.time < olderThen) {\n          ret.push(msgObk);\n          //alert(\"Name for SSN \" + cursor.key + \" is \" + cursor.value.name);\n          cursor[\"continue\"]();\n        } else {\n          // no more old messages,\n          commitIndexedDBTransaction(tx);\n          res(ret);\n        }\n      } else {\n        res(ret);\n      }\n    };\n  });\n}\nexport function cleanOldMessages(channelState) {\n  return getOldMessages(channelState.db, channelState.options.idb.ttl).then(function (tooOld) {\n    return removeMessagesById(channelState, tooOld.map(function (msg) {\n      return msg.id;\n    }));\n  });\n}\nexport function create(channelName, options) {\n  options = fillOptionsWithDefaults(options);\n  return createDatabase(channelName).then(function (db) {\n    var state = {\n      closed: false,\n      lastCursorId: 0,\n      channelName: channelName,\n      options: options,\n      uuid: randomToken(),\n      /**\n       * emittedMessagesIds\n       * contains all messages that have been emitted before\n       * @type {ObliviousSet}\n       */\n      eMIs: new ObliviousSet(options.idb.ttl * 2),\n      // ensures we do not read messages in parallel\n      writeBlockPromise: PROMISE_RESOLVED_VOID,\n      messagesCallback: null,\n      readQueuePromises: [],\n      db: db\n    };\n\n    /**\n     * Handle abrupt closes that do not originate from db.close().\n     * This could happen, for example, if the underlying storage is\n     * removed or if the user clears the database in the browser's\n     * history preferences.\n     */\n    db.onclose = function () {\n      state.closed = true;\n      if (options.idb.onclose) options.idb.onclose();\n    };\n\n    /**\n     * if service-workers are used,\n     * we have no 'storage'-event if they post a message,\n     * therefore we also have to set an interval\n     */\n    _readLoop(state);\n    return state;\n  });\n}\nfunction _readLoop(state) {\n  if (state.closed) return;\n  readNewMessages(state).then(function () {\n    return sleep(state.options.idb.fallbackInterval);\n  }).then(function () {\n    return _readLoop(state);\n  });\n}\nfunction _filterMessage(msgObj, state) {\n  if (msgObj.uuid === state.uuid) return false; // send by own\n  if (state.eMIs.has(msgObj.id)) return false; // already emitted\n  if (msgObj.data.time < state.messagesCallbackTime) return false; // older then onMessageCallback\n  return true;\n}\n\n/**\n * reads all new messages from the database and emits them\n */\nfunction readNewMessages(state) {\n  // channel already closed\n  if (state.closed) return PROMISE_RESOLVED_VOID;\n\n  // if no one is listening, we do not need to scan for new messages\n  if (!state.messagesCallback) return PROMISE_RESOLVED_VOID;\n  return getMessagesHigherThan(state.db, state.lastCursorId).then(function (newerMessages) {\n    var useMessages = newerMessages\n    /**\n     * there is a bug in iOS where the msgObj can be undefined sometimes\n     * so we filter them out\n     * @link https://github.com/pubkey/broadcast-channel/issues/19\n     */.filter(function (msgObj) {\n      return !!msgObj;\n    }).map(function (msgObj) {\n      if (msgObj.id > state.lastCursorId) {\n        state.lastCursorId = msgObj.id;\n      }\n      return msgObj;\n    }).filter(function (msgObj) {\n      return _filterMessage(msgObj, state);\n    }).sort(function (msgObjA, msgObjB) {\n      return msgObjA.time - msgObjB.time;\n    }); // sort by time\n    useMessages.forEach(function (msgObj) {\n      if (state.messagesCallback) {\n        state.eMIs.add(msgObj.id);\n        state.messagesCallback(msgObj.data);\n      }\n    });\n    return PROMISE_RESOLVED_VOID;\n  });\n}\nexport function close(channelState) {\n  channelState.closed = true;\n  channelState.db.close();\n}\nexport function postMessage(channelState, messageJson) {\n  channelState.writeBlockPromise = channelState.writeBlockPromise.then(function () {\n    return writeMessage(channelState.db, channelState.uuid, messageJson);\n  }).then(function () {\n    if (randomInt(0, 10) === 0) {\n      /* await (do not await) */\n      cleanOldMessages(channelState);\n    }\n  });\n  return channelState.writeBlockPromise;\n}\nexport function onMessage(channelState, fn, time) {\n  channelState.messagesCallbackTime = time;\n  channelState.messagesCallback = fn;\n  readNewMessages(channelState);\n}\nexport function canBeUsed() {\n  return !!getIdb();\n}\nexport function averageResponseTime(options) {\n  return options.idb.fallbackInterval * 2;\n}\nexport var IndexedDBMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","/**\n * A localStorage-only method which uses localstorage and its 'storage'-event\n * This does not work inside webworkers because they have no access to localstorage\n * This is basically implemented to support IE9 or your grandmother's toaster.\n * @link https://caniuse.com/#feat=namevalue-storage\n * @link https://caniuse.com/#feat=indexeddb\n */\n\nimport { ObliviousSet } from 'oblivious-set';\nimport { fillOptionsWithDefaults } from '../options.js';\nimport { sleep, randomToken, microSeconds as micro } from '../util.js';\nexport var microSeconds = micro;\nvar KEY_PREFIX = 'pubkey.broadcastChannel-';\nexport var type = 'localstorage';\n\n/**\n * copied from crosstab\n * @link https://github.com/tejacques/crosstab/blob/master/src/crosstab.js#L32\n */\nexport function getLocalStorage() {\n  var localStorage;\n  if (typeof window === 'undefined') return null;\n  try {\n    localStorage = window.localStorage;\n    localStorage = window['ie8-eventlistener/storage'] || window.localStorage;\n  } catch (e) {\n    // New versions of Firefox throw a Security exception\n    // if cookies are disabled. See\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1028153\n  }\n  return localStorage;\n}\nexport function storageKey(channelName) {\n  return KEY_PREFIX + channelName;\n}\n\n/**\n* writes the new message to the storage\n* and fires the storage-event so other readers can find it\n*/\nexport function postMessage(channelState, messageJson) {\n  return new Promise(function (res) {\n    sleep().then(function () {\n      var key = storageKey(channelState.channelName);\n      var writeObj = {\n        token: randomToken(),\n        time: Date.now(),\n        data: messageJson,\n        uuid: channelState.uuid\n      };\n      var value = JSON.stringify(writeObj);\n      getLocalStorage().setItem(key, value);\n\n      /**\n       * StorageEvent does not fire the 'storage' event\n       * in the window that changes the state of the local storage.\n       * So we fire it manually\n       */\n      var ev = document.createEvent('Event');\n      ev.initEvent('storage', true, true);\n      ev.key = key;\n      ev.newValue = value;\n      window.dispatchEvent(ev);\n      res();\n    });\n  });\n}\nexport function addStorageEventListener(channelName, fn) {\n  var key = storageKey(channelName);\n  var listener = function listener(ev) {\n    if (ev.key === key) {\n      fn(JSON.parse(ev.newValue));\n    }\n  };\n  window.addEventListener('storage', listener);\n  return listener;\n}\nexport function removeStorageEventListener(listener) {\n  window.removeEventListener('storage', listener);\n}\nexport function create(channelName, options) {\n  options = fillOptionsWithDefaults(options);\n  if (!canBeUsed()) {\n    throw new Error('BroadcastChannel: localstorage cannot be used');\n  }\n  var uuid = randomToken();\n\n  /**\n   * eMIs\n   * contains all messages that have been emitted before\n   * @type {ObliviousSet}\n   */\n  var eMIs = new ObliviousSet(options.localstorage.removeTimeout);\n  var state = {\n    channelName: channelName,\n    uuid: uuid,\n    eMIs: eMIs // emittedMessagesIds\n  };\n  state.listener = addStorageEventListener(channelName, function (msgObj) {\n    if (!state.messagesCallback) return; // no listener\n    if (msgObj.uuid === uuid) return; // own message\n    if (!msgObj.token || eMIs.has(msgObj.token)) return; // already emitted\n    if (msgObj.data.time && msgObj.data.time < state.messagesCallbackTime) return; // too old\n\n    eMIs.add(msgObj.token);\n    state.messagesCallback(msgObj.data);\n  });\n  return state;\n}\nexport function close(channelState) {\n  removeStorageEventListener(channelState.listener);\n}\nexport function onMessage(channelState, fn, time) {\n  channelState.messagesCallbackTime = time;\n  channelState.messagesCallback = fn;\n}\nexport function canBeUsed() {\n  var ls = getLocalStorage();\n  if (!ls) return false;\n  try {\n    var key = '__broadcastchannel_check';\n    ls.setItem(key, 'works');\n    ls.removeItem(key);\n  } catch (e) {\n    // Safari 10 in private mode will not allow write access to local\n    // storage and fail with a QuotaExceededError. See\n    // https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API#Private_Browsing_Incognito_modes\n    return false;\n  }\n  return true;\n}\nexport function averageResponseTime() {\n  var defaultTime = 120;\n  var userAgent = navigator.userAgent.toLowerCase();\n  if (userAgent.includes('safari') && !userAgent.includes('chrome')) {\n    // safari is much slower so this time is higher\n    return defaultTime * 2;\n  }\n  return defaultTime;\n}\nexport var LocalstorageMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","import { microSeconds as micro } from '../util.js';\nexport var microSeconds = micro;\nexport var type = 'simulate';\nvar SIMULATE_CHANNELS = new Set();\nexport function create(channelName) {\n  var state = {\n    time: microSeconds(),\n    name: channelName,\n    messagesCallback: null\n  };\n  SIMULATE_CHANNELS.add(state);\n  return state;\n}\nexport function close(channelState) {\n  SIMULATE_CHANNELS[\"delete\"](channelState);\n}\nexport var SIMULATE_DELAY_TIME = 5;\nexport function postMessage(channelState, messageJson) {\n  return new Promise(function (res) {\n    return setTimeout(function () {\n      var channelArray = Array.from(SIMULATE_CHANNELS);\n      channelArray.forEach(function (channel) {\n        if (channel.name === channelState.name &&\n        // has same name\n        channel !== channelState &&\n        // not own channel\n        !!channel.messagesCallback &&\n        // has subscribers\n        channel.time < messageJson.time // channel not created after postMessage() call\n        ) {\n          channel.messagesCallback(messageJson);\n        }\n      });\n      res();\n    }, SIMULATE_DELAY_TIME);\n  });\n}\nexport function onMessage(channelState, fn) {\n  channelState.messagesCallback = fn;\n}\nexport function canBeUsed() {\n  return true;\n}\nexport function averageResponseTime() {\n  return SIMULATE_DELAY_TIME;\n}\nexport var SimulateMethod = {\n  create: create,\n  close: close,\n  onMessage: onMessage,\n  postMessage: postMessage,\n  canBeUsed: canBeUsed,\n  type: type,\n  averageResponseTime: averageResponseTime,\n  microSeconds: microSeconds\n};","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n/**\n * this method is used in nodejs-environments.\n * The ipc is handled via sockets and file-writes to the tmp-folder\n */\n\nimport util from 'util';\nimport fs from 'fs';\nimport crypto from 'crypto';\nimport os from 'os';\nimport events from 'events';\nimport net from 'net';\nimport path from 'path';\nimport PQueue from 'p-queue';\nvar PQueueConstructor = PQueue[\"default\"] ? PQueue[\"default\"] : PQueue;\nimport { add as unloadAdd } from 'unload';\nimport { fillOptionsWithDefaults } from '../options.js';\nimport { randomInt, randomToken, PROMISE_RESOLVED_VOID } from '../util.js';\nimport { ObliviousSet } from 'oblivious-set';\n\n/**\n * windows sucks, so we have handle windows-type of socket-paths\n * @link https://gist.github.com/domenic/2790533#gistcomment-331356\n */\nexport function cleanPipeName(str) {\n  if (process.platform === 'win32' && !str.startsWith('\\\\\\\\.\\\\pipe\\\\')) {\n    str = str.replace(/^\\//, '');\n    str = str.replace(/\\//g, '-');\n    return '\\\\\\\\.\\\\pipe\\\\' + str;\n  } else {\n    return str;\n  }\n}\nvar mkdir = util.promisify(fs.mkdir);\nvar writeFile = util.promisify(fs.writeFile);\nvar readFile = util.promisify(fs.readFile);\nvar unlink = util.promisify(fs.unlink);\nvar readdir = util.promisify(fs.readdir);\nvar chmod = util.promisify(fs.chmod);\nvar rmDir = util.promisify(fs.rm);\nvar removeDir = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(p) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return rmDir(p, {\n            recursive: true\n          });\n        case 3:\n          return _context.abrupt(\"return\", _context.sent);\n        case 6:\n          _context.prev = 6;\n          _context.t0 = _context[\"catch\"](0);\n          if (!(_context.t0.code !== 'ENOENT')) {\n            _context.next = 10;\n            break;\n          }\n          throw _context.t0;\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 6]]);\n  }));\n  return function removeDir(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar OTHER_INSTANCES = {};\nvar TMP_FOLDER_NAME = 'pubkey.bc';\nexport var TMP_FOLDER_BASE = path.join(os.tmpdir(), TMP_FOLDER_NAME);\nvar getPathsCache = new Map();\nexport function getPaths(channelName) {\n  if (!getPathsCache.has(channelName)) {\n    /**\n     * Use the hash instead of the channelName\n     * to ensure we have no characters that cannot be used as filenames.\n     * And also to ensure that trimming the string will not end up\n     * in using the same folders for different channels.\n     */\n    var channelHash = crypto.createHash('sha256').update(channelName).digest('hex');\n\n    /**\n     * because the length of socket-paths is limited, we use only the first 20 chars\n     * and also start with A to ensure we do not start with a number\n     * @link https://serverfault.com/questions/641347/check-if-a-path-exceeds-maximum-for-unix-domain-socket\n     */\n    var channelFolder = 'A' + channelHash.substring(0, 20);\n    var channelPathBase = path.join(TMP_FOLDER_BASE, channelFolder);\n    var folderPathReaders = path.join(channelPathBase, 'rdrs');\n    var folderPathMessages = path.join(channelPathBase, 'msgs');\n    var ret = {\n      channelBase: channelPathBase,\n      readers: folderPathReaders,\n      messages: folderPathMessages\n    };\n    getPathsCache.set(channelName, ret);\n    return ret;\n  }\n  return getPathsCache.get(channelName);\n}\nvar ENSURE_BASE_FOLDER_EXISTS_PROMISE = null;\nfunction ensureBaseFolderExists() {\n  return _ensureBaseFolderExists.apply(this, arguments);\n}\nfunction _ensureBaseFolderExists() {\n  _ensureBaseFolderExists = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          if (!ENSURE_BASE_FOLDER_EXISTS_PROMISE) {\n            ENSURE_BASE_FOLDER_EXISTS_PROMISE = mkdir(TMP_FOLDER_BASE)[\"catch\"](function () {\n              return null;\n            });\n          }\n          return _context4.abrupt(\"return\", ENSURE_BASE_FOLDER_EXISTS_PROMISE);\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4);\n  }));\n  return _ensureBaseFolderExists.apply(this, arguments);\n}\nexport function ensureFoldersExist(_x2, _x3) {\n  return _ensureFoldersExist.apply(this, arguments);\n}\n\n/**\n * removes the tmp-folder\n * @return {Promise<true>}\n */\nfunction _ensureFoldersExist() {\n  _ensureFoldersExist = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(channelName, paths) {\n    var chmodValue;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          paths = paths || getPaths(channelName);\n          _context5.next = 3;\n          return ensureBaseFolderExists();\n        case 3:\n          _context5.next = 5;\n          return mkdir(paths.channelBase)[\"catch\"](function () {\n            return null;\n          });\n        case 5:\n          _context5.next = 7;\n          return Promise.all([mkdir(paths.readers)[\"catch\"](function () {\n            return null;\n          }), mkdir(paths.messages)[\"catch\"](function () {\n            return null;\n          })]);\n        case 7:\n          // set permissions so other users can use the same channel\n          chmodValue = '777';\n          _context5.next = 10;\n          return Promise.all([chmod(paths.channelBase, chmodValue), chmod(paths.readers, chmodValue), chmod(paths.messages, chmodValue)])[\"catch\"](function () {\n            return null;\n          });\n        case 10:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5);\n  }));\n  return _ensureFoldersExist.apply(this, arguments);\n}\nexport function clearNodeFolder() {\n  return _clearNodeFolder.apply(this, arguments);\n}\nfunction _clearNodeFolder() {\n  _clearNodeFolder = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          if (!(!TMP_FOLDER_BASE || TMP_FOLDER_BASE === '' || TMP_FOLDER_BASE === '/')) {\n            _context6.next = 2;\n            break;\n          }\n          throw new Error('BroadcastChannel.clearNodeFolder(): path is wrong');\n        case 2:\n          ENSURE_BASE_FOLDER_EXISTS_PROMISE = null;\n          _context6.next = 5;\n          return removeDir(TMP_FOLDER_BASE);\n        case 5:\n          ENSURE_BASE_FOLDER_EXISTS_PROMISE = null;\n          return _context6.abrupt(\"return\", true);\n        case 7:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return _clearNodeFolder.apply(this, arguments);\n}\nexport function socketPath(channelName, readerUuid, paths) {\n  paths = paths || getPaths(channelName);\n  var socketPath = path.join(paths.readers, readerUuid + '.s');\n  return cleanPipeName(socketPath);\n}\nexport function socketInfoPath(channelName, readerUuid, paths) {\n  paths = paths || getPaths(channelName);\n  return path.join(paths.readers, readerUuid + '.json');\n}\n\n/**\n * Because it is not possible to get all socket-files in a folder,\n * when used under fucking windows,\n * we have to set a normal file so other readers know our socket exists\n */\nexport function createSocketInfoFile(channelName, readerUuid, paths) {\n  var pathToFile = socketInfoPath(channelName, readerUuid, paths);\n  return writeFile(pathToFile, JSON.stringify({\n    time: microSeconds()\n  })).then(function () {\n    return pathToFile;\n  });\n}\n\n/**\n * returns the amount of channel-folders in the tmp-directory\n * @return {Promise<number>}\n */\nexport function countChannelFolders() {\n  return _countChannelFolders.apply(this, arguments);\n}\nfunction _countChannelFolders() {\n  _countChannelFolders = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n    var folders;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return ensureBaseFolderExists();\n        case 2:\n          _context7.next = 4;\n          return readdir(TMP_FOLDER_BASE);\n        case 4:\n          folders = _context7.sent;\n          return _context7.abrupt(\"return\", folders.length);\n        case 6:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7);\n  }));\n  return _countChannelFolders.apply(this, arguments);\n}\nfunction connectionError(_x4) {\n  return _connectionError.apply(this, arguments);\n}\n/**\n * creates the socket-file and subscribes to it\n * @return {{emitter: EventEmitter, server: any}}\n */\nfunction _connectionError() {\n  _connectionError = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(originalError) {\n    var count, addObj, text;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return countChannelFolders();\n        case 2:\n          count = _context8.sent;\n          if (!(count < 30)) {\n            _context8.next = 5;\n            break;\n          }\n          return _context8.abrupt(\"return\", originalError);\n        case 5:\n          addObj = {};\n          Object.entries(originalError).forEach(function (_ref4) {\n            var k = _ref4[0],\n              v = _ref4[1];\n            return addObj[k] = v;\n          });\n          text = 'BroadcastChannel.create(): error: ' + 'This might happen if you have created to many channels, ' + 'like when you use BroadcastChannel in unit-tests.' + 'Try using BroadcastChannel.clearNodeFolder() to clear the tmp-folder before each test.' + 'See https://github.com/pubkey/broadcast-channel#clear-tmp-folder';\n          return _context8.abrupt(\"return\", new Error(text + ': ' + JSON.stringify(addObj, null, 2)));\n        case 9:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8);\n  }));\n  return _connectionError.apply(this, arguments);\n}\nexport function createSocketEventEmitter(_x5, _x6, _x7) {\n  return _createSocketEventEmitter.apply(this, arguments);\n}\nfunction _createSocketEventEmitter() {\n  _createSocketEventEmitter = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(channelName, readerUuid, paths) {\n    var pathToSocket, emitter, server;\n    return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n      while (1) switch (_context11.prev = _context11.next) {\n        case 0:\n          pathToSocket = socketPath(channelName, readerUuid, paths);\n          emitter = new events.EventEmitter();\n          server = net.createServer(function (stream) {\n            stream.on('end', function () {});\n            stream.on('data', function (msg) {\n              emitter.emit('data', msg.toString());\n            });\n          });\n          _context11.next = 5;\n          return new Promise(function (resolve, reject) {\n            server.on('error', /*#__PURE__*/function () {\n              var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(err) {\n                var useErr;\n                return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n                  while (1) switch (_context9.prev = _context9.next) {\n                    case 0:\n                      _context9.next = 2;\n                      return connectionError(err);\n                    case 2:\n                      useErr = _context9.sent;\n                      reject(useErr);\n                    case 4:\n                    case \"end\":\n                      return _context9.stop();\n                  }\n                }, _callee9);\n              }));\n              return function (_x27) {\n                return _ref5.apply(this, arguments);\n              };\n            }());\n            server.listen(pathToSocket, /*#__PURE__*/function () {\n              var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(err, res) {\n                var useErr;\n                return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n                  while (1) switch (_context10.prev = _context10.next) {\n                    case 0:\n                      if (!err) {\n                        _context10.next = 7;\n                        break;\n                      }\n                      _context10.next = 3;\n                      return connectionError(err);\n                    case 3:\n                      useErr = _context10.sent;\n                      reject(useErr);\n                      _context10.next = 8;\n                      break;\n                    case 7:\n                      resolve(res);\n                    case 8:\n                    case \"end\":\n                      return _context10.stop();\n                  }\n                }, _callee10);\n              }));\n              return function (_x28, _x29) {\n                return _ref6.apply(this, arguments);\n              };\n            }());\n          });\n        case 5:\n          return _context11.abrupt(\"return\", {\n            path: pathToSocket,\n            emitter: emitter,\n            server: server\n          });\n        case 6:\n        case \"end\":\n          return _context11.stop();\n      }\n    }, _callee11);\n  }));\n  return _createSocketEventEmitter.apply(this, arguments);\n}\nexport function openClientConnection(_x8, _x9) {\n  return _openClientConnection.apply(this, arguments);\n}\n\n/**\n * writes the new message to the file-system\n * so other readers can find it\n * @return {Promise}\n */\nfunction _openClientConnection() {\n  _openClientConnection = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(channelName, readerUuid) {\n    var pathToSocket, client;\n    return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n      while (1) switch (_context12.prev = _context12.next) {\n        case 0:\n          pathToSocket = socketPath(channelName, readerUuid);\n          client = new net.Socket();\n          return _context12.abrupt(\"return\", new Promise(function (res, rej) {\n            client.connect(pathToSocket, function () {\n              return res(client);\n            });\n            client.on('error', function (err) {\n              return rej(err);\n            });\n          }));\n        case 3:\n        case \"end\":\n          return _context12.stop();\n      }\n    }, _callee12);\n  }));\n  return _openClientConnection.apply(this, arguments);\n}\nexport function writeMessage(channelName, readerUuid, messageJson, paths) {\n  var time = messageJson.time;\n  if (!time) {\n    time = microSeconds();\n  }\n  paths = paths || getPaths(channelName);\n  var writeObject = {\n    uuid: readerUuid,\n    data: messageJson\n  };\n  var token = randomToken();\n  var fileName = time + '_' + readerUuid + '_' + token + '.json';\n  var msgPath = path.join(paths.messages, fileName);\n  return writeFile(msgPath, JSON.stringify(writeObject)).then(function () {\n    return {\n      time: time,\n      uuid: readerUuid,\n      token: token,\n      path: msgPath\n    };\n  });\n}\n\n/**\n * returns the uuids of all readers\n * @return {string[]}\n */\nexport function getReadersUuids(_x10, _x11) {\n  return _getReadersUuids.apply(this, arguments);\n}\nfunction _getReadersUuids() {\n  _getReadersUuids = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(channelName, paths) {\n    var readersPath, files;\n    return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n      while (1) switch (_context13.prev = _context13.next) {\n        case 0:\n          paths = paths || getPaths(channelName);\n          readersPath = paths.readers;\n          _context13.next = 4;\n          return readdir(readersPath);\n        case 4:\n          files = _context13.sent;\n          return _context13.abrupt(\"return\", files.map(function (file) {\n            return file.split('.');\n          }).filter(function (split) {\n            return split[1] === 'json';\n          }) // do not scan .socket-files\n          .map(function (split) {\n            return split[0];\n          }));\n        case 6:\n        case \"end\":\n          return _context13.stop();\n      }\n    }, _callee13);\n  }));\n  return _getReadersUuids.apply(this, arguments);\n}\nexport function messagePath(_x12, _x13, _x14, _x15) {\n  return _messagePath.apply(this, arguments);\n}\nfunction _messagePath() {\n  _messagePath = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(channelName, time, token, writerUuid) {\n    var fileName;\n    return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n      while (1) switch (_context14.prev = _context14.next) {\n        case 0:\n          fileName = time + '_' + writerUuid + '_' + token + '.json';\n          return _context14.abrupt(\"return\", path.join(getPaths(channelName).messages, fileName));\n        case 2:\n        case \"end\":\n          return _context14.stop();\n      }\n    }, _callee14);\n  }));\n  return _messagePath.apply(this, arguments);\n}\nexport function getAllMessages(_x16, _x17) {\n  return _getAllMessages.apply(this, arguments);\n}\nfunction _getAllMessages() {\n  _getAllMessages = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee15(channelName, paths) {\n    var messagesPath, files;\n    return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n      while (1) switch (_context15.prev = _context15.next) {\n        case 0:\n          paths = paths || getPaths(channelName);\n          messagesPath = paths.messages;\n          _context15.next = 4;\n          return readdir(messagesPath);\n        case 4:\n          files = _context15.sent;\n          return _context15.abrupt(\"return\", files.map(function (file) {\n            var fileName = file.split('.')[0];\n            var split = fileName.split('_');\n            return {\n              path: path.join(messagesPath, file),\n              time: parseInt(split[0]),\n              senderUuid: split[1],\n              token: split[2]\n            };\n          }));\n        case 6:\n        case \"end\":\n          return _context15.stop();\n      }\n    }, _callee15);\n  }));\n  return _getAllMessages.apply(this, arguments);\n}\nexport function getSingleMessage(channelName, msgObj, paths) {\n  paths = paths || getPaths(channelName);\n  return {\n    path: path.join(paths.messages, msgObj.t + '_' + msgObj.u + '_' + msgObj.to + '.json'),\n    time: msgObj.t,\n    senderUuid: msgObj.u,\n    token: msgObj.to\n  };\n}\nexport function readMessage(messageObj) {\n  return readFile(messageObj.path, 'utf8').then(function (content) {\n    return JSON.parse(content);\n  });\n}\nexport function cleanOldMessages(_x18, _x19) {\n  return _cleanOldMessages.apply(this, arguments);\n}\nfunction _cleanOldMessages() {\n  _cleanOldMessages = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee16(messageObjects, ttl) {\n    var olderThan;\n    return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n      while (1) switch (_context16.prev = _context16.next) {\n        case 0:\n          olderThan = microSeconds() - ttl * 1000; // convert ttl to microseconds\n          _context16.next = 3;\n          return Promise.all(messageObjects.filter(function (obj) {\n            return obj.time < olderThan;\n          }).map(function (obj) {\n            return unlink(obj.path)[\"catch\"](function () {\n              return null;\n            });\n          }));\n        case 3:\n        case \"end\":\n          return _context16.stop();\n      }\n    }, _callee16);\n  }));\n  return _cleanOldMessages.apply(this, arguments);\n}\nexport var type = 'node';\n\n/**\n * creates a new channelState\n * @return {Promise<any>}\n */\nexport function create(_x20) {\n  return _create.apply(this, arguments);\n}\nfunction _create() {\n  _create = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee17(channelName) {\n    var options,\n      time,\n      paths,\n      ensureFolderExistsPromise,\n      uuid,\n      state,\n      _yield$Promise$all,\n      socketEE,\n      infoFilePath,\n      _args17 = arguments;\n    return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n      while (1) switch (_context17.prev = _context17.next) {\n        case 0:\n          options = _args17.length > 1 && _args17[1] !== undefined ? _args17[1] : {};\n          options = fillOptionsWithDefaults(options);\n          time = microSeconds();\n          paths = getPaths(channelName);\n          ensureFolderExistsPromise = ensureFoldersExist(channelName, paths);\n          uuid = randomToken();\n          state = {\n            time: time,\n            channelName: channelName,\n            options: options,\n            uuid: uuid,\n            paths: paths,\n            // contains all messages that have been emitted before\n            emittedMessagesIds: new ObliviousSet(options.node.ttl * 2),\n            /**\n             * Used to ensure we do not write too many files at once\n             * which could throw an error.\n             * Must always be smaller than options.node.maxParallelWrites\n             */\n            writeFileQueue: new PQueueConstructor({\n              concurrency: options.node.maxParallelWrites\n            }),\n            messagesCallbackTime: null,\n            messagesCallback: null,\n            // ensures we do not read messages in parallel\n            writeBlockPromise: PROMISE_RESOLVED_VOID,\n            otherReaderClients: {},\n            // ensure if process crashes, everything is cleaned up\n            removeUnload: unloadAdd(function () {\n              return close(state);\n            }),\n            closed: false\n          };\n          if (!OTHER_INSTANCES[channelName]) OTHER_INSTANCES[channelName] = [];\n          OTHER_INSTANCES[channelName].push(state);\n          _context17.next = 11;\n          return ensureFolderExistsPromise;\n        case 11:\n          _context17.next = 13;\n          return Promise.all([createSocketEventEmitter(channelName, uuid, paths), createSocketInfoFile(channelName, uuid, paths), refreshReaderClients(state)]);\n        case 13:\n          _yield$Promise$all = _context17.sent;\n          socketEE = _yield$Promise$all[0];\n          infoFilePath = _yield$Promise$all[1];\n          state.socketEE = socketEE;\n          state.infoFilePath = infoFilePath;\n\n          // when new message comes in, we read it and emit it\n          socketEE.emitter.on('data', function (data) {\n            // if the socket is used fast, it may appear that multiple messages are flushed at once\n            // so we have to split them before\n            var singleOnes = data.split('|');\n            singleOnes.filter(function (single) {\n              return single !== '';\n            }).forEach(function (single) {\n              try {\n                var obj = JSON.parse(single);\n                handleMessagePing(state, obj);\n              } catch (err) {\n                throw new Error('could not parse data: ' + single);\n              }\n            });\n          });\n          return _context17.abrupt(\"return\", state);\n        case 20:\n        case \"end\":\n          return _context17.stop();\n      }\n    }, _callee17);\n  }));\n  return _create.apply(this, arguments);\n}\nexport function _filterMessage(msgObj, state) {\n  if (msgObj.senderUuid === state.uuid) return false; // not send by own\n  if (state.emittedMessagesIds.has(msgObj.token)) return false; // not already emitted\n  if (!state.messagesCallback) return false; // no listener\n  if (msgObj.time < state.messagesCallbackTime) return false; // not older than onMessageCallback\n  if (msgObj.time < state.time) return false; // msgObj is older than channel\n\n  state.emittedMessagesIds.add(msgObj.token);\n  return true;\n}\n\n/**\n * when the socket pings, so that we now new messages came,\n * run this\n */\nexport function handleMessagePing(_x21, _x22) {\n  return _handleMessagePing.apply(this, arguments);\n}\n\n/**\n * ensures that the channelState is connected with all other readers\n * @return {Promise<void>}\n */\nfunction _handleMessagePing() {\n  _handleMessagePing = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee18(state, msgObj) {\n    var messages, useMessages;\n    return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n      while (1) switch (_context18.prev = _context18.next) {\n        case 0:\n          if (state.messagesCallback) {\n            _context18.next = 2;\n            break;\n          }\n          return _context18.abrupt(\"return\");\n        case 2:\n          if (msgObj) {\n            _context18.next = 8;\n            break;\n          }\n          _context18.next = 5;\n          return getAllMessages(state.channelName, state.paths);\n        case 5:\n          messages = _context18.sent;\n          _context18.next = 9;\n          break;\n        case 8:\n          // get single message\n          messages = [getSingleMessage(state.channelName, msgObj, state.paths)];\n        case 9:\n          useMessages = messages.filter(function (msgObj) {\n            return _filterMessage(msgObj, state);\n          }).sort(function (msgObjA, msgObjB) {\n            return msgObjA.time - msgObjB.time;\n          }); // sort by time\n          // if no listener or message, so not do anything\n          if (!(!useMessages.length || !state.messagesCallback)) {\n            _context18.next = 12;\n            break;\n          }\n          return _context18.abrupt(\"return\");\n        case 12:\n          _context18.next = 14;\n          return Promise.all(useMessages.map(function (msgObj) {\n            return readMessage(msgObj).then(function (content) {\n              return msgObj.content = content;\n            });\n          }));\n        case 14:\n          useMessages.forEach(function (msgObj) {\n            state.emittedMessagesIds.add(msgObj.token);\n            if (state.messagesCallback) {\n              // emit to subscribers\n              state.messagesCallback(msgObj.content.data);\n            }\n          });\n        case 15:\n        case \"end\":\n          return _context18.stop();\n      }\n    }, _callee18);\n  }));\n  return _handleMessagePing.apply(this, arguments);\n}\nexport function refreshReaderClients(channelState) {\n  return getReadersUuids(channelState.channelName, channelState.paths).then(function (otherReaders) {\n    // remove subscriptions to closed readers\n    Object.keys(channelState.otherReaderClients).filter(function (readerUuid) {\n      return !otherReaders.includes(readerUuid);\n    }).forEach(/*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(readerUuid) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return channelState.otherReaderClients[readerUuid].destroy();\n            case 3:\n              _context2.next = 7;\n              break;\n            case 5:\n              _context2.prev = 5;\n              _context2.t0 = _context2[\"catch\"](0);\n            case 7:\n              delete channelState.otherReaderClients[readerUuid];\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, null, [[0, 5]]);\n      }));\n      return function (_x23) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    // add new readers\n    return Promise.all(otherReaders.filter(function (readerUuid) {\n      return readerUuid !== channelState.uuid;\n    }) // not own\n    .filter(function (readerUuid) {\n      return !channelState.otherReaderClients[readerUuid];\n    }) // not already has client\n    .map(/*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(readerUuid) {\n        var client;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              if (!channelState.closed) {\n                _context3.next = 3;\n                break;\n              }\n              return _context3.abrupt(\"return\");\n            case 3:\n              _context3.prev = 3;\n              _context3.next = 6;\n              return openClientConnection(channelState.channelName, readerUuid);\n            case 6:\n              client = _context3.sent;\n              channelState.otherReaderClients[readerUuid] = client;\n              _context3.next = 12;\n              break;\n            case 10:\n              _context3.prev = 10;\n              _context3.t0 = _context3[\"catch\"](3);\n            case 12:\n              _context3.next = 16;\n              break;\n            case 14:\n              _context3.prev = 14;\n              _context3.t1 = _context3[\"catch\"](0);\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, null, [[0, 14], [3, 10]]);\n      }));\n      return function (_x24) {\n        return _ref3.apply(this, arguments);\n      };\n    }()));\n  });\n}\n\n/**\n * post a message to the other readers\n * @return {Promise<void>}\n */\nexport function postMessage(_x25, _x26) {\n  return _postMessage.apply(this, arguments);\n}\n\n/**\n * When multiple BroadcastChannels with the same name\n * are created in a single node-process, we can access them directly and emit messages.\n * This might not happen often in production\n * but will speed up things when this module is used in unit-tests.\n */\nfunction _postMessage() {\n  _postMessage = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee20(channelState, messageJson) {\n    var writePromise;\n    return _regeneratorRuntime.wrap(function _callee20$(_context20) {\n      while (1) switch (_context20.prev = _context20.next) {\n        case 0:\n          writePromise = channelState.writeFileQueue.add(function () {\n            return writeMessage(channelState.channelName, channelState.uuid, messageJson, channelState.paths);\n          });\n          channelState.writeBlockPromise = channelState.writeBlockPromise.then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee19() {\n            var _yield$Promise$all2, msgObj, pingStr, writeToReadersPromise;\n            return _regeneratorRuntime.wrap(function _callee19$(_context19) {\n              while (1) switch (_context19.prev = _context19.next) {\n                case 0:\n                  _context19.next = 2;\n                  return new Promise(function (res) {\n                    return setTimeout(res, 0);\n                  });\n                case 2:\n                  _context19.next = 4;\n                  return Promise.all([writePromise, refreshReaderClients(channelState)]);\n                case 4:\n                  _yield$Promise$all2 = _context19.sent;\n                  msgObj = _yield$Promise$all2[0];\n                  emitOverFastPath(channelState, msgObj, messageJson);\n                  pingStr = '{\"t\":' + msgObj.time + ',\"u\":\"' + msgObj.uuid + '\",\"to\":\"' + msgObj.token + '\"}|';\n                  writeToReadersPromise = Promise.all(Object.values(channelState.otherReaderClients).filter(function (client) {\n                    return client.writable;\n                  }) // client might have closed in between\n                  .map(function (client) {\n                    return new Promise(function (res) {\n                      client.write(pingStr, res);\n                    });\n                  }));\n                  /**\n                   * clean up old messages\n                   * to not waste resources on cleaning up,\n                   * only if random-int matches, we clean up old messages\n                   */\n                  if (randomInt(0, 20) === 0) {\n                    /* await */\n                    getAllMessages(channelState.channelName, channelState.paths).then(function (allMessages) {\n                      return cleanOldMessages(allMessages, channelState.options.node.ttl);\n                    });\n                  }\n                  return _context19.abrupt(\"return\", writeToReadersPromise);\n                case 11:\n                case \"end\":\n                  return _context19.stop();\n              }\n            }, _callee19);\n          })));\n          return _context20.abrupt(\"return\", channelState.writeBlockPromise);\n        case 3:\n        case \"end\":\n          return _context20.stop();\n      }\n    }, _callee20);\n  }));\n  return _postMessage.apply(this, arguments);\n}\nexport function emitOverFastPath(state, msgObj, messageJson) {\n  if (!state.options.node.useFastPath) {\n    // disabled\n    return;\n  }\n  var others = OTHER_INSTANCES[state.channelName].filter(function (s) {\n    return s !== state;\n  });\n  var checkObj = {\n    time: msgObj.time,\n    senderUuid: msgObj.uuid,\n    token: msgObj.token\n  };\n  others.filter(function (otherState) {\n    return _filterMessage(checkObj, otherState);\n  }).forEach(function (otherState) {\n    otherState.messagesCallback(messageJson);\n  });\n}\nexport function onMessage(channelState, fn) {\n  var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : microSeconds();\n  channelState.messagesCallbackTime = time;\n  channelState.messagesCallback = fn;\n  handleMessagePing(channelState);\n}\n\n/**\n * closes the channel\n * @return {Promise}\n */\nexport function close(channelState) {\n  if (channelState.closed) return PROMISE_RESOLVED_VOID;\n  channelState.closed = true;\n  channelState.emittedMessagesIds.clear();\n  OTHER_INSTANCES[channelState.channelName] = OTHER_INSTANCES[channelState.channelName].filter(function (o) {\n    return o !== channelState;\n  });\n  if (channelState.removeUnload) {\n    channelState.removeUnload.remove();\n  }\n  return new Promise(function (res) {\n    if (channelState.socketEE) channelState.socketEE.emitter.removeAllListeners();\n    Object.values(channelState.otherReaderClients).forEach(function (client) {\n      return client.destroy();\n    });\n    if (channelState.infoFilePath) {\n      try {\n        fs.unlinkSync(channelState.infoFilePath);\n      } catch (err) {}\n    }\n\n    /**\n     * the server get closed lazy because others might still write on it\n     * and have not found out that the infoFile was deleted\n     */\n    setTimeout(function () {\n      channelState.socketEE.server.close();\n      res();\n    }, 200);\n  });\n}\nexport function canBeUsed() {\n  return typeof fs.mkdir === 'function';\n}\n\n/**\n * on node we use a relatively high averageResponseTime,\n * because the file-io might be in use.\n * Also it is more important that the leader-election is reliable,\n * than to have a fast election.\n */\nexport function averageResponseTime() {\n  return 200;\n}\nexport function microSeconds() {\n  // convert nano to micro seconds\n  return parseInt(now() / 1000);\n}\nfunction now() {\n  return Number(process.hrtime.bigint()); // returns nanoseconds\n}","/* global WorkerGlobalScope */\n\nexport function addBrowser(fn) {\n  if (typeof WorkerGlobalScope === 'function' && self instanceof WorkerGlobalScope) {\n    /**\n     * Because killing a worker does directly stop the excution\n     * of the code, our only chance is to overwrite the close function\n     * which could work some times.\n     * @link https://stackoverflow.com/q/72903255/3443137\n     */\n    var oldClose = self.close.bind(self);\n    self.close = function () {\n      fn();\n      return oldClose();\n    };\n  } else {\n    /**\n     * if we are on react-native, there is no window.addEventListener\n     * @link https://github.com/pubkey/unload/issues/6\n     */\n    if (typeof window.addEventListener !== 'function') {\n      return;\n    }\n\n    /**\n     * for normal browser-windows, we use the beforeunload-event\n     */\n    window.addEventListener('beforeunload', function () {\n      fn();\n    }, true);\n\n    /**\n     * for iframes, we have to use the unload-event\n     * @link https://stackoverflow.com/q/47533670/3443137\n     */\n    window.addEventListener('unload', function () {\n      fn();\n    }, true);\n  }\n\n  /**\n   * TODO add fallback for safari-mobile\n   * @link https://stackoverflow.com/a/26193516/3443137\n   */\n}","export function addNode(fn) {\n  process.on('exit', function () {\n    return fn();\n  });\n\n  /**\n   * on the following events,\n   * the process will not end if there are\n   * event-handlers attached,\n   * therefore we have to call process.exit()\n   */\n  process.on('beforeExit', function () {\n    return fn().then(function () {\n      return process.exit();\n    });\n  });\n  // catches ctrl+c event\n  process.on('SIGINT', function () {\n    return fn().then(function () {\n      return process.exit();\n    });\n  });\n  // catches uncaught exceptions\n  process.on('uncaughtException', function (err) {\n    return fn().then(function () {\n      console.trace(err);\n      process.exit(101);\n    });\n  });\n}","import { addBrowser } from './browser.js';\nimport { addNode } from './node.js';\n\n/**\n * Use the code directly to prevent import problems\n * with the detect-node package.\n * @link https://github.com/iliakan/detect-node/blob/master/index.js\n */\nvar isNode = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\nvar USE_METHOD = isNode ? addNode : addBrowser;\nvar LISTENERS = new Set();\nvar startedListening = false;\nfunction startListening() {\n  if (startedListening) {\n    return;\n  }\n  startedListening = true;\n  USE_METHOD(runAll);\n}\nexport function add(fn) {\n  startListening();\n  if (typeof fn !== 'function') {\n    throw new Error('Listener is no function');\n  }\n  LISTENERS.add(fn);\n  var addReturn = {\n    remove: function remove() {\n      return LISTENERS[\"delete\"](fn);\n    },\n    run: function run() {\n      LISTENERS[\"delete\"](fn);\n      return fn();\n    }\n  };\n  return addReturn;\n}\nexport function runAll() {\n  var promises = [];\n  LISTENERS.forEach(function (fn) {\n    promises.push(fn());\n    LISTENERS[\"delete\"](fn);\n  });\n  return Promise.all(promises);\n}\nexport function removeAll() {\n  LISTENERS.clear();\n}\nexport function getSize() {\n  return LISTENERS.size;\n}","import { NativeMethod } from './methods/native.js';\nimport { IndexedDBMethod } from './methods/indexed-db.js';\nimport { LocalstorageMethod } from './methods/localstorage.js';\nimport { SimulateMethod } from './methods/simulate.js';\n// the line below will be removed from es5/browser builds\nimport * as NodeMethod from './methods/node.js';\n\n// order is important\nvar METHODS = [NativeMethod,\n// fastest\nIndexedDBMethod, LocalstorageMethod];\nexport function chooseMethod(options) {\n  var chooseMethods = [].concat(options.methods, METHODS).filter(Boolean);\n\n  // the line below will be removed from es5/browser builds\n  chooseMethods.push(NodeMethod);\n\n  // directly chosen\n  if (options.type) {\n    if (options.type === 'simulate') {\n      // only use simulate-method if directly chosen\n      return SimulateMethod;\n    }\n    var ret = chooseMethods.find(function (m) {\n      return m.type === options.type;\n    });\n    if (!ret) throw new Error('method-type ' + options.type + ' not found');else return ret;\n  }\n\n  /**\n   * if no webworker support is needed,\n   * remove idb from the list so that localstorage will be chosen\n   */\n  if (!options.webWorkerSupport) {\n    chooseMethods = chooseMethods.filter(function (m) {\n      return m.type !== 'idb';\n    });\n  }\n  var useMethod = chooseMethods.find(function (method) {\n    return method.canBeUsed();\n  });\n  if (!useMethod) {\n    throw new Error(\"No usable method found in \" + JSON.stringify(METHODS.map(function (m) {\n      return m.type;\n    })));\n  } else {\n    return useMethod;\n  }\n}","import { isPromise, PROMISE_RESOLVED_FALSE, PROMISE_RESOLVED_VOID } from './util.js';\nimport { chooseMethod } from './method-chooser.js';\nimport { fillOptionsWithDefaults } from './options.js';\n\n/**\n * Contains all open channels,\n * used in tests to ensure everything is closed.\n */\nexport var OPEN_BROADCAST_CHANNELS = new Set();\nvar lastId = 0;\nexport var BroadcastChannel = function BroadcastChannel(name, options) {\n  // identifier of the channel to debug stuff\n  this.id = lastId++;\n  OPEN_BROADCAST_CHANNELS.add(this);\n  this.name = name;\n  if (ENFORCED_OPTIONS) {\n    options = ENFORCED_OPTIONS;\n  }\n  this.options = fillOptionsWithDefaults(options);\n  this.method = chooseMethod(this.options);\n\n  // isListening\n  this._iL = false;\n\n  /**\n   * _onMessageListener\n   * setting onmessage twice,\n   * will overwrite the first listener\n   */\n  this._onML = null;\n\n  /**\n   * _addEventListeners\n   */\n  this._addEL = {\n    message: [],\n    internal: []\n  };\n\n  /**\n   * Unsent message promises\n   * where the sending is still in progress\n   * @type {Set<Promise>}\n   */\n  this._uMP = new Set();\n\n  /**\n   * _beforeClose\n   * array of promises that will be awaited\n   * before the channel is closed\n   */\n  this._befC = [];\n\n  /**\n   * _preparePromise\n   */\n  this._prepP = null;\n  _prepareChannel(this);\n};\n\n// STATICS\n\n/**\n * used to identify if someone overwrites\n * window.BroadcastChannel with this\n * See methods/native.js\n */\nBroadcastChannel._pubkey = true;\n\n/**\n * clears the tmp-folder if is node\n * @return {Promise<boolean>} true if has run, false if not node\n */\nexport function clearNodeFolder(options) {\n  options = fillOptionsWithDefaults(options);\n  var method = chooseMethod(options);\n  if (method.type === 'node') {\n    return method.clearNodeFolder().then(function () {\n      return true;\n    });\n  } else {\n    return PROMISE_RESOLVED_FALSE;\n  }\n}\n\n/**\n * if set, this method is enforced,\n * no mather what the options are\n */\nvar ENFORCED_OPTIONS;\nexport function enforceOptions(options) {\n  ENFORCED_OPTIONS = options;\n}\n\n// PROTOTYPE\nBroadcastChannel.prototype = {\n  postMessage: function postMessage(msg) {\n    if (this.closed) {\n      throw new Error('BroadcastChannel.postMessage(): ' + 'Cannot post message after channel has closed ' +\n      /**\n       * In the past when this error appeared, it was really hard to debug.\n       * So now we log the msg together with the error so it at least\n       * gives some clue about where in your application this happens.\n       */\n      JSON.stringify(msg));\n    }\n    return _post(this, 'message', msg);\n  },\n  postInternal: function postInternal(msg) {\n    return _post(this, 'internal', msg);\n  },\n  set onmessage(fn) {\n    var time = this.method.microSeconds();\n    var listenObj = {\n      time: time,\n      fn: fn\n    };\n    _removeListenerObject(this, 'message', this._onML);\n    if (fn && typeof fn === 'function') {\n      this._onML = listenObj;\n      _addListenerObject(this, 'message', listenObj);\n    } else {\n      this._onML = null;\n    }\n  },\n  addEventListener: function addEventListener(type, fn) {\n    var time = this.method.microSeconds();\n    var listenObj = {\n      time: time,\n      fn: fn\n    };\n    _addListenerObject(this, type, listenObj);\n  },\n  removeEventListener: function removeEventListener(type, fn) {\n    var obj = this._addEL[type].find(function (obj) {\n      return obj.fn === fn;\n    });\n    _removeListenerObject(this, type, obj);\n  },\n  close: function close() {\n    var _this = this;\n    if (this.closed) {\n      return;\n    }\n    OPEN_BROADCAST_CHANNELS[\"delete\"](this);\n    this.closed = true;\n    var awaitPrepare = this._prepP ? this._prepP : PROMISE_RESOLVED_VOID;\n    this._onML = null;\n    this._addEL.message = [];\n    return awaitPrepare\n    // wait until all current sending are processed\n    .then(function () {\n      return Promise.all(Array.from(_this._uMP));\n    })\n    // run before-close hooks\n    .then(function () {\n      return Promise.all(_this._befC.map(function (fn) {\n        return fn();\n      }));\n    })\n    // close the channel\n    .then(function () {\n      return _this.method.close(_this._state);\n    });\n  },\n  get type() {\n    return this.method.type;\n  },\n  get isClosed() {\n    return this.closed;\n  }\n};\n\n/**\n * Post a message over the channel\n * @returns {Promise} that resolved when the message sending is done\n */\nfunction _post(broadcastChannel, type, msg) {\n  var time = broadcastChannel.method.microSeconds();\n  var msgObj = {\n    time: time,\n    type: type,\n    data: msg\n  };\n  var awaitPrepare = broadcastChannel._prepP ? broadcastChannel._prepP : PROMISE_RESOLVED_VOID;\n  return awaitPrepare.then(function () {\n    var sendPromise = broadcastChannel.method.postMessage(broadcastChannel._state, msgObj);\n\n    // add/remove to unsent messages list\n    broadcastChannel._uMP.add(sendPromise);\n    sendPromise[\"catch\"]().then(function () {\n      return broadcastChannel._uMP[\"delete\"](sendPromise);\n    });\n    return sendPromise;\n  });\n}\nfunction _prepareChannel(channel) {\n  var maybePromise = channel.method.create(channel.name, channel.options);\n  if (isPromise(maybePromise)) {\n    channel._prepP = maybePromise;\n    maybePromise.then(function (s) {\n      // used in tests to simulate slow runtime\n      /*if (channel.options.prepareDelay) {\n           await new Promise(res => setTimeout(res, this.options.prepareDelay));\n      }*/\n      channel._state = s;\n    });\n  } else {\n    channel._state = maybePromise;\n  }\n}\nfunction _hasMessageListeners(channel) {\n  if (channel._addEL.message.length > 0) return true;\n  if (channel._addEL.internal.length > 0) return true;\n  return false;\n}\nfunction _addListenerObject(channel, type, obj) {\n  channel._addEL[type].push(obj);\n  _startListening(channel);\n}\nfunction _removeListenerObject(channel, type, obj) {\n  channel._addEL[type] = channel._addEL[type].filter(function (o) {\n    return o !== obj;\n  });\n  _stopListening(channel);\n}\nfunction _startListening(channel) {\n  if (!channel._iL && _hasMessageListeners(channel)) {\n    // someone is listening, start subscribing\n\n    var listenerFn = function listenerFn(msgObj) {\n      channel._addEL[msgObj.type].forEach(function (listenerObject) {\n        if (msgObj.time >= listenerObject.time) {\n          listenerObject.fn(msgObj.data);\n        }\n      });\n    };\n    var time = channel.method.microSeconds();\n    if (channel._prepP) {\n      channel._prepP.then(function () {\n        channel._iL = true;\n        channel.method.onMessage(channel._state, listenerFn, time);\n      });\n    } else {\n      channel._iL = true;\n      channel.method.onMessage(channel._state, listenerFn, time);\n    }\n  }\n}\nfunction _stopListening(channel) {\n  if (channel._iL && !_hasMessageListeners(channel)) {\n    // no one is listening, stop subscribing\n    channel._iL = false;\n    var time = channel.method.microSeconds();\n    channel.method.onMessage(channel._state, null, time);\n  }\n}","export interface Serializer {\n  serialize: (value: any) => string\n  deserialize: (value: string) => any\n}\n\nexport function serialize(\n  obj: Record<string, unknown>,\n  serializer: Serializer = { serialize: JSON.stringify, deserialize: JSON.parse },\n) {\n  return serializer.serialize(obj);\n}\n","import type { MethodType } from 'broadcast-channel'\nimport type { Store } from 'pinia'\nimport type { Serializer } from './utils'\nimport { BroadcastChannel as BroadcastChannelImpl } from 'broadcast-channel'\nimport { serialize } from './utils'\n\nexport interface Options {\n  initialize?: boolean\n  type?: MethodType\n  serializer?: Serializer\n}\n\n/**\n * Share state across browser tabs.\n *\n * @example\n *\n * ```ts\n * import useStore from './store'\n *\n * const counterStore = useStore()\n *\n * share('counter', counterStore, { initialize: true })\n * ```\n *\n * @param key - A property of a store state.\n * @param store - The store the plugin will augment.\n * @param options - Share state options.\n * @param options.initialize - Immediately recover the shared state from another tab.\n * @param options.type - 'native', 'idb', 'localstorage', 'node'.\n * @param options.serializer - Custom serializer to serialize state before broadcasting.\n */\nexport function share<T extends Store, K extends keyof T['$state']>(\n  key: K,\n  store: T,\n  { initialize, serializer, type }: Options,\n): { sync: () => void, unshare: () => void } {\n  const channelName = `${store.$id}-${key.toString()}`\n\n  const channel = new BroadcastChannelImpl(channelName, {\n    type,\n  })\n  let externalUpdate = false\n  let timestamp = 0\n\n  store.$subscribe((_, state) => {\n    if (!externalUpdate) {\n      timestamp = Date.now()\n      channel.postMessage({\n        timestamp,\n        newValue: serialize(state, serializer)[key as number],\n      })\n    }\n    externalUpdate = false\n  })\n\n  channel.onmessage = (evt) => {\n    if (evt === undefined) {\n      channel.postMessage({\n        timestamp,\n        // @ts-expect-error: TODO\n        newValue: serialize(store.$state, serializer)[key],\n      })\n      return\n    }\n    if (evt.timestamp <= timestamp)\n      return\n\n    externalUpdate = true\n    timestamp = evt.timestamp\n    store[key] = evt.newValue\n  }\n\n  const sync = () => channel.postMessage(undefined)\n  const unshare = () => {\n    return channel.close()\n  }\n\n  if (initialize)\n    sync()\n\n  return { sync, unshare }\n}\n"],"mappings":"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","names":["n","_asyncToGenerator","o","_regeneratorRuntime","t","e","r","define","n","i","a","c","o","u","h","p","events","PQueue","now","microSeconds","microSeconds","type","create","close","postMessage","onMessage","canBeUsed","averageResponseTime","type","microSeconds","microSeconds","type","postMessage","listener","create","canBeUsed","close","onMessage","averageResponseTime","microSeconds","type","create","close","postMessage","onMessage","canBeUsed","averageResponseTime","_filterMessage","averageResponseTime","canBeUsed","cleanOldMessages","close","create","microSeconds","onMessage","postMessage","type","writeMessage","import_util","PQueue","util","fs","_asyncToGenerator","_regeneratorRuntime","removeDir","path","os","crypto","socketPath","microSeconds","events","net","writeMessage","cleanOldMessages","type","create","close","_filterMessage","msgObj","postMessage","onMessage","canBeUsed","averageResponseTime","now","BroadcastChannel","BroadcastChannel","postMessage","type","obj","close","listenerFn","type","BroadcastChannel","type","BroadcastChannel"]}